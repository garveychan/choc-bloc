<% listings.each do |listing| %>
    <div class="col-md-4">
        <div class="card mb-4 card-transform">
            <a href= <%= "#{listing_path(listing.id)}" %> class="stretched-link"></a>
            <% if listing.image.attached? %>
                <img class="card-img-top img-fit" src= "<%= asset_path(url_for(listing.image)) %>" alt= "<%= listing.name %>">
            <% end %>
            <div class="card-body">
                <h4><%= listing.name %></h4>
                <p class="card-text"><%= "#{listing.description[0...150].strip}#{"..." if listing.description.size > 150}" %></p>
                <div class="d-flex justify-content-between align-items-center mt-auto">
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary py-0 align-items" disabled>
                            $<span><%="#{listing.price.to_s.gsub(/(\d)(?=(\d{3})+(?!\d))/, '\1,')}"%></span>
                        </button>
                    </div>
                <small class="text-muted"><%= listing.user[:first_name] %></small>
                </div>
            </div>
        </div>
    </div>
<% end %>